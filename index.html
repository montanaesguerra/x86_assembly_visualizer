<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Assembly Visualizer – Starter</title>
    <link rel="stylesheet" href="style.css?v=15">
  </head>
  <body>
    <header>
      <h1>Assembly Visualizer • x86 (32-bit)</h1>
      <div class="controls">
        <select id="demoSelect" class="control-select" aria-label="Select demo">
          <option value="" selected>Select a demo…</option>
          <option value="arithmetic">Arithmetic</option>
          <option value="test">test</option>
          <option value="test2">test2</option>
          <option value="moves">Moves</option>
          <!--<option value="cmp-test" disabled>cmp/test (coming soon)</option> -->
          <option value="stack">Stack</option>
          <option value="Print">Print</option>
          <option value="Arithmetic_Basics">Arithmetic Basics</option>
          <option value="Branching_Basics">Branching Basics</option>
          <option value="Loop">Loop</option>
          <option value="Calling_Functions_DEMO">Calling_Functions_DEMO</option>
          <option value="XOR_Basics">XOR_Basics</option>
          <option value="LEA_Demo">LEA_Demo</option>
          <option value="CALL_RET_Basics">CALL_RET_Basics</option>
          <option value="CALL_RET_cdecl">CALL_RET_cdecl</option>
          <option value="CALL_RET_stdcall">CALL_RET_stdcall</option>
          <option value="CTF_A1_Arithmetic_AddXorSub">CTF_A1_Arithmetic_AddXorSub</option>
          <option value="CTF_A2_Arithmetic_LEA">CTF_A2_Arithmetic_LEA</option>
          <option value="CTF_A3_IncFlags">CTF_A3_IncFlags</option>
          <option value="CTF_A4_CmpFlags">CTF_A4_CmpFlags</option>

          <option value="CTF_B1_PushStore">CTF_B1_PushStore</option>
          <option value="CTF_B2_PushImmPop">CTF_B2_PushImmPop</option>
          <option value="CTF_B3_PushPushPopPop">CTF_B3_PushPushPopPop</option>
          <option value="CTF_B4_AddESP">CTF_B4_AddESP</option>

          <option value="CTF_Bonus1_C_Addition">CTF_Bonus1_C_Addition</option>

          <option value="CTF_C1_cdecl_BeforeCleanup">CTF_C1_cdecl_BeforeCleanup</option>
          <option value="CTF_C2_stdcall_Ret8">CTF_C2_stdcall_Ret8</option>
          <option value="CTF_C3_LeaveRetExplain">CTF_C3_LeaveRetExplain</option>

          <option value="CTF_D1_JG_Jmp">CTF_D1_JG_Jmp</option>
          <option value="CTF_D2_JNE_Equal">CTF_D2_JNE_Equal</option>
          <option value="CTF_D3_TEST_JZ">CTF_D3_TEST_JZ</option>
          <option value="CTF_D4_Signed_JG">CTF_D4_Signed_JG</option>
          <option value="CTF_D4_Unsigned_JA">CTF_D4_Unsigned_JA</option>

          <option value="CTF_E1_LEA_ScalePlus">CTF_E1_LEA_ScalePlus</option>
          <option value="CTF_E2_LEA_BaseIndexDisp">CTF_E2_LEA_BaseIndexDisp</option>

          <option value="CTF_F1_AddOverflow">CTF_F1_AddOverflow</option>
          <option value="CTF_F2_SubBorrow">CTF_F2_SubBorrow</option>
          <option value="Argh">Argh</option>


          <option value="CTF_G1_Sum1to3">CTF_G1_Sum1to3</option>
          <option value="CTF_G2_EqualityBranch">CTF_G2_EqualityBranch</option>
          <option value="CTF_G3_CallRet_Inspect">CTF_G3_CallRet_Inspect</option>

        </select>
        <button id="loadDemo">Load</button>
        <button id="stepBtn">Step ▶</button>
        <button id="resetBtn" class="btn-secondary" disabled>Reset ↺</button>
      </div>
    </header>

    <main class="grid">
      <!-- Column 1: Instructions -->
      <section class="panel" id="col-asm">
        <header><h2>Instructions</h2></header>
        <div class="panel-body">
          <ol class="asm-list" id="asmList"></ol>
          <p class="hint">Tip: highlight shows the current instruction (EIP). Change instructions by selecting a demo</p>
        </div>
      </section>

      <!-- Column 2: Registers & Flags -->
      <section class="panel" id="col-regs">
        <header><h2>Registers & Flags</h2></header>
        <div class="panel-body" id="regsBody">
          <!-- Registers injected by JS -->
          <div class="flags" id="flags"></div>
          <p class="hint">Flags light up when set. (CF, ZF, SF, OF, PF, AF)</p>
        </div>
      </section>

      <!-- Column 3: Memory Placeholder -->
      <section class="panel" id="col-mem">
        <header><h2>Memory</h2></header>
        <div class="panel-body">
          <table class="mem-table" id="memTable">
            <thead>
              <tr><th>Address</th><th>Decimal</th><th>Hex</th></tr>
            </thead>
            <tbody></tbody>
          </table>
          <!--<p class="hint">Use <code>writeMem(addr, bytes)</code> in JS to demo loads like <code>mov ebx, [eax]</code>.</p> -->
        </div>
      </section>

      <!-- Column 4: Stack -->
      <section class="panel" id="col-stack">
        <header><h2>Stack (conceptual)</h2></header>
        <div class="panel-body">
          <div class="stack-meta">Top of stack is at the bottom. <code>push</code> adds, <code>pop</code> removes.</div>
          <div class="stack" id="stack"></div>
          <p class="hint">In x86, the stack grows downward in memory. We display the top-most element at the bottom for readability.</p>
        </div>
      </section>
    </main>

    <script src="app.js?v=15"></script>
  </body>
</html>
